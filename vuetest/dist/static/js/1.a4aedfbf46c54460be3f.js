webpackJsonp([1],{F28q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),a=n.n(i),o=n("oVO8"),s={data:function(){return{showForm:!1,companys:[],jobs:[],list:[{companys:[],cid:"",jobs:[],gid:""}]}},props:["dialog","info"],mounted:function(){this.showForm=this.dialog,this.getCompany(0)},methods:{cancel:function(){this.$emit("close","close")},submit:function(){for(var t=this,e="",n="",i=0;i<this.list.length;i++){if(!this.list[i].cid)return this.$alert("请选择公司","温馨提示",{confirmButtonText:"确定",callback:function(){}}),!1;if(!this.list[i].gid)return this.$alert("请选择职位","温馨提示",{confirmButtonText:"确定",callback:function(){}}),!1;e+=this.list[i].cid+",",n+=this.list[i].gid+","}e=e.substring(0,e.length-1),n=n.substring(0,n.length-1),this.$http.get(o.a+"/api/talent/recommend?id="+this.info.id+"&basic_id="+this.info.basic_id+"&customerIds="+e+"&positionIds="+n).then(function(e){200==e.data.code?(t.$message({type:"success",message:"推荐成功！"}),t.$emit("close","ok")):t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},close:function(t){this.$emit("close","close")},changeCom:function(t,e){this.getJobs(t.cid,e)},changeJob:function(t){console.log(t)},getCompany:function(t){var e=this;this.$http.get(o.a+"/api/Customer/getCustomerList").then(function(n){200==n.data.code?(e.list[t].companys=n.data.data,e.$set(e.list,t,e.list[t])):e.$alert(n.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},getJobs:function(t,e){var n=this;this.$http.get(o.a+"/api/Position/getPositionList?customer_id="+t).then(function(t){200==t.data.code?(n.list[e].jobs=t.data.data,n.$set(n.list,e,n.list[e])):n.$alert(t.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},add:function(){this.list.push({companys:[],cid:"",jobs:[],gid:""}),this.getCompany(this.list.length-1)},out:function(t){this.list.splice(t,1)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recomened"},[n("el-dialog",{attrs:{title:"重新推荐",visible:t.showForm},on:{"update:visible":function(e){t.showForm=e},close:t.close}},[t._l(t.list,function(e,i){return n("div",{key:i},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择公司"},on:{change:function(n){t.changeCom(e,i)}},model:{value:e.cid,callback:function(n){t.$set(e,"cid",n)},expression:"item.cid"}},t._l(e.companys,function(t){return n("el-option",{key:t.id,attrs:{label:t.enterprise_name,value:t.id+""}})})),t._v(" "),n("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择职位"},on:{change:function(n){t.changeJob(e,i)}},model:{value:e.gid,callback:function(n){t.$set(e,"gid",n)},expression:"item.gid"}},t._l(e.jobs,function(t){return n("el-option",{key:t.id,attrs:{label:t.position_title,value:t.id+""}})})),t._v(" "),n("i",{staticClass:"el-icon-plus",on:{click:t.add}}),t._v(" "),t.list.length>1?n("i",{staticClass:"el-icon-delete",on:{click:function(e){t.out(i)}}}):t._e()],1)}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var r={data:function(){return{showForm:!1,form:{id:"",annual_salary:"",service_charge:"",butt:"",make_list:"",induction_time:""}}},props:["dialog","info","type"],mounted:function(){if(this.showForm=this.dialog,this.form.id=this.info.id,"offer"!=this.type)for(var t in this.form)this.form[t]=this.info[t],"induction_time"==t&&(this.form[t]=1e3*this.form[t])},methods:{changeTime:function(t){console.log(t)},cancel:function(){this.$emit("editWin","close")},submit:function(t){var e=this;if(!this.form.induction_time)return this.$alert("请选择入职时间","温馨提示",{confirmButtonText:"确定",callback:function(){}}),!1;"offer"!=this.type?this.$http.post(o.a+"/api/talent/editByOffer",{id:this.form.id,annual_salary:this.form.annual_salary,service_charge:this.form.service_charge,butt:this.form.butt,make_list:this.form.make_list,induction_time:new Date(this.form.induction_time).getTime()/1e3}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"操作成功！"}),e.$emit("editWin","ok")):e.$alert(t.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})}):(this.form.operationType=7,this.$http.post(o.a+"/api/talent/operationStatus",{id:this.form.id,operationType:7,annual_salary:this.form.annual_salary,service_charge:this.form.service_charge,butt:this.form.butt,make_list:this.form.make_list,induction_time:new Date(this.form.induction_time).getTime()/1e3}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"操作成功！"}),e.$emit("editWin","ok")):e.$alert(t.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})}))},close:function(t){this.$emit("editWin","close")}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recomened"},[n("el-dialog",{attrs:{title:"编辑",visible:t.showForm},on:{"update:visible":function(e){t.showForm=e},close:t.close}},[n("el-form",{ref:"form",staticClass:"ruleForm",attrs:{model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"年薪:",prop:"annual_salary"}},[n("el-input",{model:{value:t.form.annual_salary,callback:function(e){t.$set(t.form,"annual_salary",e)},expression:"form.annual_salary"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"服务费:",prop:"service_charge"}},[n("el-input",{model:{value:t.form.service_charge,callback:function(e){t.$set(t.form,"service_charge",e)},expression:"form.service_charge"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"对接:",prop:"butt"}},[n("el-input",{model:{value:t.form.butt,callback:function(e){t.$set(t.form,"butt",e)},expression:"form.butt"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"做单:",prop:"make_list"}},[n("el-input",{model:{value:t.form.make_list,callback:function(e){t.$set(t.form,"make_list",e)},expression:"form.make_list"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"入职时间:",prop:"induction_time"}},[n("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date","value-format":"yyyy-mm-dd",placeholder:"选择日期"},on:{change:t.changeTime},model:{value:t.form.induction_time,callback:function(e){t.$set(t.form,"induction_time",e)},expression:"form.induction_time"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit("form")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u={data:function(){return{btn:{flag:"1",list:[{name:"进行中",id:"1",selected:!0},{name:"已发offer",id:"2",selected:!1},{name:"储备中",id:"3",selected:!1},{name:"不合适",id:"4",selected:!1}]},table:[],tableData:[],searchTalent:"",loading:!0,dialog:!1,info:"",editDialog:!1,editInfo:"",page:"1",total:1,currents:{0:"项目经理筛选",1:"客户筛选",2:"面试中",3:"谈薪中"},type:"",reBack:!1,options:[{id:"1",name:"姓名"},{id:"2",name:"手机"},{id:"3",name:"职位"}],searchType:"",url:""}},mounted:function(){document.addEventListener("keyup",this.enter);var t=JSON.parse(sessionStorage.getItem("talentInfo"));t&&t.searchTalent?(this.page=t.page,this.searchTalent=t.searchTalent,this.btn.flag=t.btnFlag,this.search()):(t&&t.btnFlag&&(this.btn.flag=t.btnFlag),this.init())},beforeDestroy:function(){document.removeEventListener("keyup",this.enter)},components:{recomend:n("VU/8")(s,l,!1,function(t){n("g40L"),n("wa2T")},"data-v-22a91643",null).exports,edit:n("VU/8")(r,c,!1,function(t){n("IWRF"),n("t5UM")},"data-v-4561de8c",null).exports},methods:{talentExport:function(){var t=this,e=sessionStorage.getItem("token");this.$http.get(o.a+"/api/Talent/export?type="+this.btn.flag).then(function(n){if(n.data.error)t.$alert(n.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}});else{var i=o.a+"/api/Talent/export?type="+t.btn.flag+"&access_token="+e,a=document.createElement("a");a.style.display="none",a.href=i,document.body.appendChild(a),a.click()}})},enter:function(t){13!=t.keyCode&&13!=t.which||setTimeout(this.search,100)},toDate:function(t){return new Date(1e3*t).format("yyyy-MM-dd hh:mm")},toDateJob:function(t){return new Date(1e3*t).format("yyyy-MM-dd")},back:function(){this.reBack=!1,this.searchTalent="",this.searchType="",this.init()},changeTalent:function(t){this.btn.flag=t,this.loading=!0,this.searchTalent="",this.reBack=!1,this.init()},search:function(){var t=this;if(!this.searchTalent)return this.$alert("请输入搜索数据","温馨提示",{confirmButtonText:"确定",callback:function(){}}),!1;this.loading=!0,sessionStorage.getItem("talentInfo")||(this.page=1),this.$http.get(o.a+"/api/Talent/search?searchData="+this.searchTalent+"&page="+this.page+"&num=50&searchType="+this.btn.flag).then(function(e){200==e.data.code?(t.tableData=e.data.data.list,t.total=e.data.data.total,t.loading=!1,t.reBack=!0):(t.loading=!1,t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}}))})},showDetail:function(t){var e=this;this.$http.get(o.a+"/api/talent/getResumeDetail?resume_id="+t.basic_id).then(function(n){if(200==n.data.code){sessionStorage.setItem("talent",a()(n.data.data)),sessionStorage.setItem("talentId",t.basic_id);var i={page:e.page,searchTalent:e.searchTalent,btnFlag:e.btn.flag};sessionStorage.setItem("talentInfo",a()(i)),e.$router.push("/admin/talent/resume")}else e.$alert(n.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},init:function(){var t=this;this.tableData=[],this.loading=!0,this.$http.get(o.a+"/api/talent/getTalentList?page="+this.page+"&num=50&status="+this.btn.flag).then(function(e){200==e.data.code?(t.loading=!1,t.tableData=e.data.data.list,t.total=e.data.data.total):t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})}).catch(function(e){t.$alert(e,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},operation:function(t,e){7==e?(this.editDialog=!0,this.type="offer",this.editInfo=t):this.changeType(t,e)},changeType:function(t,e){var n=this;this.$confirm("是否继续该操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$http.get(o.a+"/api/talent/operationStatus?id="+t+"&operationType="+e).then(function(t){200==t.data.code?(n.$message({type:"success",message:"操作成功！"}),n.searchTalent?n.search():n.init()):n.$alert(t.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})}).catch(function(){n.$message({type:"info",message:"已取消操作"})})},currentChange:function(t){this.page=t,this.searchTalent?this.search():this.init()},rerecommend:function(t){this.info=t,this.dialog=!0},close:function(t){this.dialog=!1,"ok"==t&&(this.searchTalent?this.search():this.init())},edit:function(t){this.editInfo=t,this.type="",this.editDialog=!0},editWin:function(t,e){this.editDialog=!1,"ok"==t&&(this.searchTalent?this.search():this.init())}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"talent",staticStyle:{width:"1800px"}},[n("div",{staticClass:"btn"},[t._l(t.btn.list,function(e,i){return n("span",{key:i,class:{sign:e.id==t.btn.flag},on:{click:function(n){t.changeTalent(e.id)}}},[t._v(t._s(e.name))])}),t._v(" "),n("el-input",{staticStyle:{width:"210px"},attrs:{placeholder:"输入姓名、手机号、职位查询","prefix-icon":"el-icon-search"},model:{value:t.searchTalent,callback:function(e){t.searchTalent=e},expression:"searchTalent"}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.search}},[n("i",{staticClass:"el-icon-search",staticStyle:{"margin-right":"5px"}}),t._v("查询")]),t._v(" "),n("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.talentExport}},[t._v("导出")]),t._v(" "),t.reBack?n("el-button",{staticStyle:{width:"80px"},attrs:{type:"warning",plain:""},on:{click:t.back}},[t._v("返回")]):t._e()],2),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.tableData.length>0?n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"job_seeker",align:"center","min-width":"5%",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"detail",on:{click:function(n){t.showDetail(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),"4"!=t.btn.flag?n("el-table-column",{attrs:{align:"center","min-width":"6%",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{},["1"==t.btn.flag?n("div",[3!==e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,1)}}},[t._v("pass")]):t._e(),t._v(" "),0===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,2)}}},[t._v("有效")]):t._e(),t._v(" "),0===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,3)}}},[t._v("储备")]):t._e(),t._v(" "),1===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,4)}}},[t._v("约面")]):t._e(),t._v(" "),2===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,5)}}},[t._v("复试")]):t._e(),t._v(" "),2===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,6)}}},[t._v("谈薪")]):t._e(),t._v(" "),3===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row,7)}}},[t._v("offer")]):t._e(),t._v(" "),3===e.row.current_progress?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.operation(e.row.id,8)}}},[t._v("拒绝")]):t._e()],1):t._e(),t._v(" "),"2"==t.btn.flag?n("div",[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.edit(e.row)}}},[t._v("编辑")])],1):t._e(),t._v(" "),"3"==t.btn.flag?n("div",[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.rerecommend(e.row)}}},[t._v("重新推荐")])],1):t._e()])}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"induction_time",align:"center","min-width":"8%",label:"最后一次修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.update_time?n("span",[t._v(t._s(t.toDate(e.row.update_time)))]):n("span",[t._v(t._s(t.toDate(e.row.create_time)))])]}}])}),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"enterprise_name",align:"center","min-width":"20%",label:"入职公司"}}):t._e(),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"induction_time",align:"center","min-width":"6%",label:"入职时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.toDateJob(e.row.induction_time)))])]}}])}):t._e(),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"position_title",align:"center","min-width":"6%",label:"职位名称"}}):t._e(),t._v(" "),"2"!=t.btn.flag?n("el-table-column",{attrs:{prop:"enterprise_name",align:"center","min-width":"18%",label:"推荐公司"}}):t._e(),t._v(" "),"2"!=t.btn.flag?n("el-table-column",{attrs:{prop:"position_title",align:"center","min-width":"6%",label:"推荐职位"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"referees_name",align:"center","min-width":"5%",label:"推荐人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"manager_name",align:"center","min-width":"5%",label:"项目经理"}}),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"annual_salary",align:"center","min-width":"5%",label:"年薪(元)"}}):t._e(),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"service_charge",align:"center","min-width":"5%",label:"服务费"}}):t._e(),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"butt",align:"center","min-width":"5%",label:"对接"}}):t._e(),t._v(" "),"2"==t.btn.flag?n("el-table-column",{attrs:{prop:"make_list",align:"center","min-width":"5%",label:"做单"}}):t._e(),t._v(" "),"1"===t.btn.flag?n("el-table-column",{attrs:{prop:"current_progress",align:"center","min-width":"5%",label:"当前进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.currents[e.row.current_progress]))])]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"induction_time",align:"center","min-width":"8%",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.toDate(e.row.create_time)))])]}}])})],1):n("el-table",{attrs:{data:t.table,border:""}})],1),t._v(" "),t.total?n("el-pagination",{staticClass:"page",attrs:{background:"",layout:"prev, pager, next","page-size":50,total:t.total},on:{"current-change":t.currentChange}}):t._e(),t._v(" "),t.dialog?n("recomend",{attrs:{dialog:t.dialog,info:t.info},on:{close:t.close}}):t._e(),t._v(" "),t.editDialog?n("edit",{attrs:{type:t.type,dialog:t.editDialog,info:t.editInfo},on:{editWin:t.editWin}}):t._e()],1)},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(t){n("Kq9X"),n("dxSh")},"data-v-8d375852",null);e.default=f.exports},IWRF:function(t,e){},Kq9X:function(t,e){},dxSh:function(t,e){},g40L:function(t,e){},t5UM:function(t,e){},wa2T:function(t,e){}});
//# sourceMappingURL=1.a4aedfbf46c54460be3f.js.map