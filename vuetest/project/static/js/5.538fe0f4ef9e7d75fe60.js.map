{"version":3,"sources":["webpack:///src/components/rule_win.vue","webpack:///./src/components/rule_win.vue?71e0","webpack:///./src/components/rule_win.vue","webpack:///src/components/rule.vue","webpack:///./src/components/rule.vue?1964","webpack:///./src/components/rule.vue"],"names":["rule_win","required","message","trigger","name","node_list","_this","this","dialogForm","nodeList","_loop","i","_loop2","j","item","selected","_this2","form","id","status","tableData","components_rule_win","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","width","height","title","visible","showRule","append-to-body","on","update:visible","$event","type","model","value","callback","$$v","activeName2","expression","_l","index","key","label","rule","class","is-checked","click","checkOn","staticStyle","margin-top","margin-right","_v","_s","chooseAll","color","border-color","chooseReset","slot","cancelRule","enterRule","showForm","close","ref","label-width","rules","prop","$set","chooseRule","chooseRules","length","cancel","submitForm","staticRenderFns","src_components_rule_win","__webpack_require__","normalizeComponent","ssrContext","init","then","res","ruleList","child","all","catch","error","_this3","_this4","components_rule","add","directives","rawName","data","border","align","scopedSlots","_u","fn","scope","size","showDetail","row","out","edit","dialog","_e","rule_Component","rule_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.538fe0f4ef9e7d75fe60.js","sourcesContent":["/*\n * @Author: zhengu.jiang \n * @Date: 2018-05-14 18:19:13 \n * @Module: {权限弹框} \n */\n\n<template>\n    <div class=\"rule_win\">\n        <el-dialog width=\"30%\" height=\"150%\" title=\"选择权限\" :visible.sync=\"showRule\" append-to-body>\n            <div>\n                <el-tabs v-model=\"activeName2\" type=\"card\">\n                    <el-tab-pane v-for=\"(item,index) in nodes\" :key=\"index\" :label=\"item.name\" :name=\"item.name\">\n                        <div class=\"el-checkbox-button el-checkbox-button--medium\" @click=\"checkOn(rule)\" v-bind:class=\"{'is-checked': rule.selected}\" v-for=\"(rule,index) in item.child\" :key=\"index + 'a'\">\n                            <span class=\"el-checkbox-button__inner\" style=\"margin-top:10px;margin-right:10px\">{{rule.name}}</span>\n                        </div>\n                        <div class=\"all\">\n                            <span @click=\"chooseAll(item)\">全部选择</span>\n                            <span @click=\"chooseReset(item)\" style=\"color:gray;border-color:gray\">全部取消</span>\n                        </div>\n                    </el-tab-pane>\n                </el-tabs>\n            </div>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"cancelRule\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"enterRule()\">确 定</el-button>\n            </div>\n        </el-dialog>\n        <el-dialog title=\"添加用户组\" :visible.sync=\"showForm\" @close=\"close\">\n            <el-form :model=\"form\" label-width=\"100px\" :rules=\"rules\" ref=\"form\" class=\"ruleForm\">\n                <el-form-item label=\"职位\" prop=\"name\">\n                    <el-input v-model=\"form.name\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"权限\" prop=\"rules\">\n                    <el-button type=\"primary\" @click=\"chooseRule\">添加权限</el-button>\n                    <span>已选择{{chooseRules.length}}个权限</span>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"cancel\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitForm('form')\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n<script>\nexport default {\n    data() {\n        return {\n            rules: {\n                name: [\n                    { required: true, message: \"请输入姓名\", trigger: \"change\" }\n                ],\n                node_list: [\n                    { required: true, message: \"请选择权限\", trigger: \"change\" }\n                ]\n            },\n            tableData: [],\n            form: {\n                name: \"\",\n                node_list: \"\"\n            },\n            showForm: false,\n            showRule: false,\n            // checkGroup: [],\n            chooseRules: [],\n            activeName2: \"全部\",\n            nodes: []\n        };\n    },\n    props: [\"dialogForm\", \"nodeList\", \"edit\", \"rule\"],\n    created() {\n        if (this.edit) {\n            this.form.name = this.rule.name;\n            this.chooseRules = this.rule.node_list;\n            this.form.node_list = this.rule.node_list.join(\",\");\n        }\n    },\n    mounted() {\n        let all = { name: \"全部\", child: [] };\n        this.showForm = this.dialogForm;\n        this.nodes = this.deepCopy(this.nodeList);\n        if (this.edit) {\n            for (let i = 0; i < this.nodes.length; i++) {\n                for (let j = 0; j < this.nodes[i].child.length; j++) {\n                    this.chooseRules.filter(item => {\n                        if (item == this.nodes[i].child[j].id) {\n                            this.nodes[i].child[j].selected = true;\n                        }\n                    });\n                }\n            }\n        }\n    },\n    methods: {\n        deepCopy: function(item) {\n            var obj = {};\n            obj = JSON.parse(JSON.stringify(item));\n            return obj;\n        },\n        chooseAll(item){\n            for(let i = 0; i < this.nodes.length; i++){\n                if(this.nodes[i].id == item.id){\n                    for(let j = 0; j < this.nodes[i].child.length; j++){\n                        this.checkOn(this.nodes[i].child[j],'all')\n                    }\n                }\n            }\n        },\n        chooseReset(item){\n            for(let i = 0; i < this.nodes.length; i++){\n                if(this.nodes[i].id == item.id){\n                    for(let j = 0; j < this.nodes[i].child.length; j++){\n                        this.checkOn(this.nodes[i].child[j],'reset')\n                    }\n                }\n            }\n        },\n        //选择权限\n        checkOn(item,isAll) {\n            for(let i = 0; i < this.nodes.length; i++){\n                for(let j = 0; j < this.nodes[i].child.length; j++){\n                    if(item.id == this.nodes[i].child[j].id){\n                        this.nodes[i].child[j].selected = !this.nodes[i].child[j].selected;\n                        if(isAll == 'all'){\n                            this.nodes[i].child[j].selected = true\n                        }\n                        if(isAll == 'reset'){\n                            this.nodes[i].child[j].selected = false\n                        }\n                    }\n                }\n            }\n        },\n        cancel() {\n            this.$emit(\"close\", \"close\");\n        },\n        submitForm(formName) {\n            this.$refs[formName].validate(valid => {\n                if (valid) {\n                    this.tableData.push(this.form);\n                    if (this.edit) {\n                        this.tableData[0].node_id = this.rule.id;\n                        this.tableData[0].status = this.rule.status;\n                    }\n                    console.log(this.tableData)\n                    console.log(this.tableData[0].node_list)\n                    if(!this.tableData[0].node_list){\n                        this.$alert(\"请添加权限\", '温馨提示', {confirmButtonText: '确定',callback: ()=>{}});\n                        return false\n                    }\n                    this.$emit(\"close\", \"ok\", this.tableData);\n                } else {\n                    return false;\n                }\n            });\n        },\n        close() {\n            this.$emit(\"close\", \"close\");\n        },\n        chooseRule() {\n            this.showRule = true;\n        },\n        enterRule() {\n            this.showRule = false;\n            this.chooseRules = [];\n            for (let i = 0; i < this.nodes.length; i++) {\n                for (let j = 0; j < this.nodes[i].child.length; j++) {\n                    if (i === 0 && this.nodes[i].child[j].selected) {\n                        this.chooseRules.push(this.nodes[i].child[j].id);\n                    }\n                }\n            }\n            this.form.node_list = this.chooseRules.join(\",\");\n        },\n        cancelRule() {\n            this.showRule = false;\n        }\n    }\n};\n</script>\n<style >\n    .el-checkbox-button__inner{\n        border-left: 1px solid #bfcbd9;\n    }\n</style>\n<style lang=\"less\" scoped>\n    .rule_win{\n        .all{\n            width: 100%;\n            height: 25px;\n            margin-top: 20px;\n            span{\n                cursor: pointer;\n                display: inline-block;\n                width: 100px;\n                height: 25px;\n                text-align: center;\n                line-height: 25px;\n                border: 1px solid #ff9800;\n                color: #ff9800;\n            }\n        }\n    }\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/rule_win.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rule_win\"},[_c('el-dialog',{attrs:{\"width\":\"30%\",\"height\":\"150%\",\"title\":\"选择权限\",\"visible\":_vm.showRule,\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.showRule=$event}}},[_c('div',[_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.activeName2),callback:function ($$v) {_vm.activeName2=$$v},expression:\"activeName2\"}},_vm._l((_vm.nodes),function(item,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":item.name,\"name\":item.name}},[_vm._l((item.child),function(rule,index){return _c('div',{key:index + 'a',staticClass:\"el-checkbox-button el-checkbox-button--medium\",class:{'is-checked': rule.selected},on:{\"click\":function($event){_vm.checkOn(rule)}}},[_c('span',{staticClass:\"el-checkbox-button__inner\",staticStyle:{\"margin-top\":\"10px\",\"margin-right\":\"10px\"}},[_vm._v(_vm._s(rule.name))])])}),_vm._v(\" \"),_c('div',{staticClass:\"all\"},[_c('span',{on:{\"click\":function($event){_vm.chooseAll(item)}}},[_vm._v(\"全部选择\")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"gray\",\"border-color\":\"gray\"},on:{\"click\":function($event){_vm.chooseReset(item)}}},[_vm._v(\"全部取消\")])])],2)}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancelRule}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.enterRule()}}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加用户组\",\"visible\":_vm.showForm},on:{\"update:visible\":function($event){_vm.showForm=$event},\"close\":_vm.close}},[_c('el-form',{ref:\"form\",staticClass:\"ruleForm\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"职位\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\",\"prop\":\"rules\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.chooseRule}},[_vm._v(\"添加权限\")]),_vm._v(\" \"),_c('span',[_vm._v(\"已选择\"+_vm._s(_vm.chooseRules.length)+\"个权限\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('form')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-062a5b55\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/rule_win.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-062a5b55\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rule_win.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-062a5b55\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./rule_win.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rule_win.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rule_win.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-062a5b55\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./rule_win.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-062a5b55\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/rule_win.vue\n// module id = null\n// module chunks = ","/*\n * @Author: zhengu.jiang \n * @Date: 2018-05-14 18:20:13 \n * @Module: {权限设置} \n */\n\n<template>\n    <div>\n        <el-button type=\"primary\" @click=\"add\">添加用户组</el-button>\n        <el-table\n            v-loading=\"loading\"\n            :data=\"tableData\"\n            border\n            style=\"width: 1002px;margin-top:20px;\">\n            <el-table-column\n                prop=\"name\"\n                label=\"职位\"\n                style=\"width:20%;\"\n                align=\"center\"\n                >\n            </el-table-column>\n            <el-table-column\n                prop=\"node_list.length\"\n                label=\"权限数量\"\n                style=\"width:20%\"\n                align=\"center\"\n                >\n            </el-table-column>\n            <el-table-column\n                label=\"操作\"\n                style=\"width:20%\"\n                align=\"center\"\n                >\n                <template slot-scope=\"scope\">\n                    <el-button @click=\"showDetail(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\n                    <el-button type=\"text\" @click=\"out(scope.row.id)\" size=\"small\" style=\"color:red\">删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <rule @close=\"dialog\" v-if=\"dialogForm\" :edit=\"edit\" :rule=\"rule\" :nodeList=\"nodeList\" :dialogForm=\"dialogForm\"></rule>\n    </div>\n</template>\n<script>\nimport rule from \"./rule_win\";\nimport store from \"../store.js\"\nimport api from \"./http.js\"\nexport default {\n    data() {\n        return {\n            tableData: [],\n            dialogForm: false,\n            nodeList: [],\n            outerVisible: false,\n            innerVisible: false,\n            rule: '',\n            edit: false,\n            loading: true,\n        }\n    },\n    components: {\n        rule\n    },\n    mounted(){\n        this.init();\n    },\n    methods: {\n        init(){\n            this.$http.get(api + '/api/Rule/ruleList')\n            .then((res)=>{\n                if(res.data.code == 200){\n                    this.tableData = res.data.data.ruleList;\n                    this.nodeList = res.data.data.nodeList;\n                    let all = {name: '全部',child: []}\n                    for(var i = 0; i < this.nodeList.length; i++){\n                        for(var j = 0; j < this.nodeList[i].child.length; j++){\n                            this.nodeList[i].child[j].selected = false;\n                        }\n                        all.child = all.child.concat(this.nodeList[i].child)\n                    }\n                    this.nodeList.unshift(all);\n                    this.loading = false;\n                }else{\n                    this.$alert(res.data.error, '温馨提示', {\n                        confirmButtonText: '确定',\n                        callback: ()=>{}\n                    });\n                }\n            })\n            .catch((error)=>{\n                this.$alert(error, '温馨提示', {\n                    confirmButtonText: '确定',\n                    callback: ()=>{}\n                });\n            })\n        },\n        //编辑\n        showDetail(res){\n            this.rule = res;\n            this.dialogForm = true;\n            this.edit = true;\n        },\n        //删除\n        out(id){\n            this.$confirm('此操作将永久删除该职位, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRule(id);\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });          \n                });\n            \n        },\n        deleteRule(id){\n            this.$http.get(api + \"/api/Rule/delRule?node_id=\" + id)\n            .then((res)=>{\n                if(res.data.code == 200){\n                    this.init();\n                    this.$message({\n                        type: 'success',\n                        message: '删除成功！'\n                    })\n                }else{\n                    this.$alert(res.data.error, '温馨提示', {\n                        confirmButtonText: '确定',\n                        callback: ()=>{}\n                    });\n                }\n            })\n            .catch((error)=>{\n                this.$alert(error, '温馨提示', {\n                    confirmButtonText: '确定',\n                    callback: ()=>{}\n                });\n            })\n        },\n        add(){\n            this.dialogForm = true;\n            this.edit =false;\n        },\n        cancel(){\n            this.dialogForm = false;\n        },\n        dialog(res,data){\n            this.dialogForm = false;\n            if(res == 'ok'){\n                if(this.edit){\n                    this.$http.post(api + \"/api/Rule/editRule\",data[0])\n                    .then((res)=>{\n                        if(res.data.code == 200){\n                            this.$message({\n                                type: 'success',\n                                message: '编辑成功！'\n                            })\n                            this.init();\n                        }else{\n                            this.$alert(res.data.error, '温馨提示', {\n                                confirmButtonText: '确定',\n                                callback: ()=>{}\n                            });\n                        }\n                    })\n                    .catch((error)=>{\n                        this.$alert(error, '温馨提示', {\n                            confirmButtonText: '确定',\n                            callback: ()=>{}\n                        });\n                    })\n                }else{\n                    this.$http.post(api + \"/api/Rule/addRule\",data[0])\n                    .then((res)=>{\n                        if(res.data.code == 200){\n                            this.$message({\n                                type: 'success',\n                                message: '添加成功！'\n                            })\n                            this.init();\n                        }else{\n                            this.$alert(res.data.error, '温馨提示', {\n                                confirmButtonText: '确定',\n                                callback: ()=>{}\n                            });\n                        }\n                    })\n                    .catch((error)=>{\n                        this.$alert(error, '温馨提示', {\n                            confirmButtonText: '确定',\n                            callback: ()=>{}\n                        });\n                    })\n                }\n            }\n        },\n    }\n}\n</script>\n<style lang=\"less\" scoped>\n    table{\n        border-collapse: collapse;\n        border: 1px solid #ccc;\n        tr,td{\n            text-align: center;\n            border: 1px solid #ccc;\n        }\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/rule.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加用户组\")]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"1002px\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{staticStyle:{\"width\":\"20%\"},attrs:{\"prop\":\"name\",\"label\":\"职位\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"20%\"},attrs:{\"prop\":\"node_list.length\",\"label\":\"权限数量\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"20%\"},attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.showDetail(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"color\":\"red\"},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.out(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),(_vm.dialogForm)?_c('rule',{attrs:{\"edit\":_vm.edit,\"rule\":_vm.rule,\"nodeList\":_vm.nodeList,\"dialogForm\":_vm.dialogForm},on:{\"close\":_vm.dialog}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ef92fa64\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/rule.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ef92fa64\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./rule.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rule.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./rule.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ef92fa64\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./rule.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ef92fa64\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/rule.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}