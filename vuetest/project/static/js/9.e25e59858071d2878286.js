webpackJsonp([9],{"3qkS":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("oVO8"),s={data:function(){return{list:{enterprise_name:"",legal_person:"",level:0,financing:"",reg_time:"",address:"",type:"",background:"",reports:""},nature:[{name:"国有企业",id:1},{name:"民/私有企业",id:0},{name:"台资企业",id:2},{name:"港资企业",id:3},{name:"其他外资企业",id:4}],remark:!1,cheat:"",loading:!1,tableData:[],page:1,total:1,isClick:!1}},mounted:function(){var t=JSON.parse(sessionStorage.getItem("company"));if(t){for(var e in this.list)this.list[e]=t[e];this.list.id=t.id,this.getList()}else sessionStorage.removeItem("customerInfo")},destroyed:function(){sessionStorage.removeItem("company")},methods:{delCustomer:function(){var t=this;this.$confirm("是否删除该客户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(i.a+"/api/Customer/delete?id="+t.list.id).then(function(e){200==e.data.code?(t.$message({type:"success",message:"删除成功！"}),history.go(-1)):t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},toDate:function(t){return new Date(t).format("yyyy-MM-dd hh:mm:ss")},getList:function(){var t=this;this.loading=!0,this.$http.post(i.a+"/api/Cheat/getCheatList?customer_id="+this.list.id+"&page="+this.page+"&num=10").then(function(e){200==e.data.code?(t.loading=!1,t.tableData=e.data.data.list,t.total=e.data.data.total):t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},currentChange:function(t){this.page=t,this.getList()},back:function(){history.go(-1)},openRemark:function(){this.remark=!0},cancel:function(){this.remark=!1},submit:function(){var t=this;this.remark=!1,this.$http.post(i.a+"/api/Cheat/addCheat?customer_id="+this.list.id+"&cheat="+this.cheat).then(function(e){200==e.data.code?(t.$message({type:"success",message:"添加成功！"}),t.getList()):t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}})})},save:function(){var t=this;this.isClick=!0,sessionStorage.getItem("company")?this.$http.post(i.a+"/api/Customer/editCustomer",this.list).then(function(e){200==e.data.code?(t.$message({type:"success",message:"保存成功！"}),history.go(-1)):(t.isClick=!1,t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}}))}):this.$http.post(i.a+"/api/Customer/addCustomer",this.list).then(function(e){200==e.data.code?(t.$message({type:"success",message:"保存成功！"}),history.go(-1)):(t.isClick=!1,t.$alert(e.data.error,"温馨提示",{confirmButtonText:"确定",callback:function(){}}))})},showError:function(t){this.$alert(t,"温馨提示",{confirmButtonText:"确定",callback:function(){}})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer"},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fl",staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{type:"warning",plain:""},on:{click:t.back}},[t._v("返回")]),t._v(" "),t.list.id?a("el-button",{staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:t.openRemark}},[t._v("添加备忘")]):t._e(),t._v(" "),t.list.id?a("el-button",{staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:t.delCustomer}},[t._v("删除")]):t._e()],1),t._v(" "),a("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",align:"center",cellspacing:"0"}},[a("tr",[a("td",[t._v("公司名称:")]),t._v(" "),a("td",{staticClass:"left",attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.list.enterprise_name,expression:"list.enterprise_name"}],attrs:{type:"text"},domProps:{value:t.list.enterprise_name},on:{input:function(e){e.target.composing||t.$set(t.list,"enterprise_name",e.target.value)}}})]),t._v(" "),a("td",[t._v("创始人:")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.list.legal_person,expression:"list.legal_person"}],attrs:{type:"text"},domProps:{value:t.list.legal_person},on:{input:function(e){e.target.composing||t.$set(t.list,"legal_person",e.target.value)}}})]),t._v(" "),a("td",[t._v("客户等级:")]),t._v(" "),a("td",[a("el-rate",{model:{value:t.list.level,callback:function(e){t.$set(t.list,"level",e)},expression:"list.level"}})],1)]),t._v(" "),a("tr",[a("td",{staticStyle:{"line-height":"100px"}},[t._v("融资情况:")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.list.financing,expression:"list.financing"}],staticStyle:{width:"100%",height:"200px"},attrs:{type:"text"},domProps:{value:t.list.financing},on:{input:function(e){e.target.composing||t.$set(t.list,"financing",e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[t._v("注册时间:")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.list.reg_time,expression:"list.reg_time"}],attrs:{type:"text"},domProps:{value:t.list.reg_time},on:{input:function(e){e.target.composing||t.$set(t.list,"reg_time",e.target.value)}}})]),t._v(" "),a("td",[t._v("公司地址:")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.list.address,expression:"list.address"}],attrs:{type:"text"},domProps:{value:t.list.address},on:{input:function(e){e.target.composing||t.$set(t.list,"address",e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[t._v("企业性质")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[a("el-radio-group",{model:{value:t.list.type,callback:function(e){t.$set(t.list,"type",e)},expression:"list.type"}},t._l(t.nature,function(e,i){return a("el-radio",{key:i,staticStyle:{"margin-right":"20px"},attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1)]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"6"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.list.background,expression:"list.background"}],staticStyle:{width:"100%",height:"200px"},attrs:{type:"text"},domProps:{value:t.list.background},on:{input:function(e){e.target.composing||t.$set(t.list,"background",e.target.value)}}})])]),t._v(" "),t._m(1),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"6"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.list.reports,expression:"list.reports"}],staticStyle:{width:"100%",height:"200px"},attrs:{type:"text"},domProps:{value:t.list.reports},on:{input:function(e){e.target.composing||t.$set(t.list,"reports",e.target.value)}}})])]),t._v(" "),t._m(2)]),t._v(" "),a("div",{staticClass:"btn"},[t.isClick?a("el-button",{staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{type:"primary"}},[t._v("保存")]):a("el-button",{staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加备忘",visible:t.remark,width:"500px"},on:{"update:visible":function(e){t.remark=e}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cheat,expression:"cheat"}],staticClass:"cheat",domProps:{value:t.cheat},on:{input:function(e){e.target.composing||(t.cheat=e.target.value)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"max-width":"1402px","margin-top":"20px"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{staticStyle:{width:"20%"},attrs:{prop:"name",label:"姓名",align:"center"}}),t._v(" "),a("el-table-column",{staticStyle:{width:"20%"},attrs:{prop:"create_time",label:"最近一次修改时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.toDate(1e3*e.row.create_time)))])]}}])}),t._v(" "),a("el-table-column",{staticStyle:{width:"20%"},attrs:{prop:"cheat",label:"备忘",align:"center"}}),t._v(" "),a("el-table-column",{staticStyle:{width:"20%"},attrs:{label:"操作日志",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("span",[t._v("添加备忘")]):a("span",[t._v("编辑")])]}}])})],1),t._v(" "),t.total?a("el-pagination",{staticClass:"page",attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.currentChange}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{rowspan:"4"}},[this._v("企业概况")]),this._v(" "),e("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"6"}},[this._v("公司背景:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"6"}},[this._v("相关报道:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"foot"},[e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td")])}]};var r=a("VU/8")(s,n,!1,function(t){a("y3rh"),a("HNYk")},"data-v-08fbaff1",null);e.default=r.exports},HNYk:function(t,e){},y3rh:function(t,e){}});
//# sourceMappingURL=9.e25e59858071d2878286.js.map